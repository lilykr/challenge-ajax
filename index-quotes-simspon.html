<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Ajax quest challenge</title>
</head>

<body>
  <section class="section">
    <div class="container">
      <h1 class="title">Simpson Quotes</h1>
      <p>Reload for another quote!</p>

      <div class="content" id="quote"> 
      </div>
    </div>
    <button onclick="refreshQuote()">Another quote</button>
    
  </section>

  <!-- We need to load axios first! -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js" integrity="sha256-S1J4GVHHDMiirir9qsXWc8ZWw74PHHafpsHp5PXtjTs=" crossorigin="anonymous"></script>
  
  <script>
    function fetchQuoteJSON() {
  const quoteId = 1;
  const url = `https://simpsons-quotes-api.herokuapp.com/quotes?count=${quoteId}`;
  axios.get(url)
      .then(function(res) {
        return res.data;
      })
      .then(function(quote) {
        console.log('data decoded from JSON:', quote);

        const quoteHTML = `
        <h1> ${quote[0].character} </h1>
        <img src="${quote[0].image}" />
        <p> ${quote[0].quote} </p> `;
        document.getElementById("quote").innerHTML = quoteHTML;
      });

}

fetchQuoteJSON();

function refreshQuote() {
  location.reload();
}

  </script>
</body>

</html>